<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<title>å„ªå…ˆåº¦ToDoãƒªã‚¹ãƒˆï¼ˆå›ºå®šï¼‰</title>

<style>
body {
  font-family: sans-serif;
  background: #eef2f7;
  margin: 0;
  padding: 20px;
}

h1 {
  text-align: center;
}

#controls {
  text-align: center;
  margin-bottom: 15px;
}

#controls input,
#controls select,
#controls button {
  padding: 6px;
  margin: 2px;
  font-size: 14px;
}

#controls button {
  cursor: pointer;
}

#space {
  position: relative;
  width: 100%;
  min-height: 60vh;
  background: linear-gradient(#ffffff, #dbeafe);
  border-radius: 12px;
  border: 2px solid #ccc;
  padding: 10px;
  display: flex;
  flex-wrap: wrap;
  gap: 10px;
}

/* ToDoæœ¬ä½“ */
.todo {
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: 12px;
  padding: 8px 12px;
  font-weight: bold;
  color: #fff;
  cursor: pointer;
  transition: transform 0.2s, background 0.2s;
}

/* æœŸé™åˆ‡ã‚Œ */
.todo.urgent {
  animation: shake 0.15s infinite;
  background: #ff4d4d !important;
}

/* å®Œäº† */
.todo.done {
  background: #999 !important;
  transform: scale(0.5);
  opacity: 0;
  transition: transform 0.5s, opacity 0.5s;
}

/* éœ‡ãˆ */
@keyframes shake {
  0%   { transform: translateX(0); }
  25%  { transform: translateX(-2px); }
  50%  { transform: translateX(2px); }
  75%  { transform: translateX(-2px); }
  100% { transform: translateX(0); }
}
</style>
</head>
<body>

<h1>ğŸŒˆ å„ªå…ˆåº¦ToDoãƒªã‚¹ãƒˆï¼ˆå›ºå®šï¼‰</h1>

<div id="controls">
  <input id="text" placeholder="ToDoå†…å®¹">
  å„ªå…ˆåº¦
  <select id="priority">
    <option value="1">1ï¼ˆä½ï¼‰</option>
    <option value="2">2</option>
    <option value="3">3</option>
    <option value="4">4</option>
    <option value="5">5ï¼ˆé«˜ï¼‰</option>
  </select>
  æœŸé™
  <input type="date" id="deadline">
  <button id="addBtn">è¿½åŠ </button>
</div>

<div id="space"></div>

<script>
const space = document.getElementById("space");
const textInput = document.getElementById("text");
const prioritySelect = document.getElementById("priority");
const deadlineInput = document.getElementById("deadline");
const addBtn = document.getElementById("addBtn");

const todos = [];

/* å„ªå…ˆåº¦ â†’ è‰² */
function priorityToColor(priority){
  switch(priority){
    case 5: return "#ff3b3b"; // èµ¤
    case 4: return "#ff8533"; // ã‚ªãƒ¬ãƒ³ã‚¸
    case 3: return "#ffd133"; // é»„è‰²
    case 2: return "#33b3ff"; // æ°´è‰²
    case 1: return "#337aff"; // é’
    default: return "#aaa";
  }
}

/* å„ªå…ˆåº¦ â†’ ã‚µã‚¤ã‚º */
function priorityToSize(priority){
  switch(priority){
    case 5: return "1.8em";
    case 4: return "1.5em";
    case 3: return "1.2em";
    case 2: return "1em";
    case 1: return "0.9em";
    default: return "1em";
  }
}

/* æœŸé™ãƒã‚§ãƒƒã‚¯ */
function isDeadlineOver(deadline){
  if(!deadline) return false;
  const now = new Date();
  return new Date(deadline) < now;
}

/* ToDoè¿½åŠ  */
addBtn.addEventListener("click", ()=>{
  const text = textInput.value.trim();
  const priority = Number(prioritySelect.value);
  const deadline = deadlineInput.value ? new Date(deadlineInput.value) : null;
  if(!text) return;

  const el = document.createElement("div");
  el.className = "todo";
  el.textContent = text;
  el.style.background = priorityToColor(priority);
  el.style.fontSize = priorityToSize(priority);

  if(isDeadlineOver(deadline)){
    el.classList.add("urgent");
  }

  /* å®Œäº†ã‚¯ãƒªãƒƒã‚¯ */
  el.addEventListener("click", ()=>{
    if(!el.classList.contains("done")){
      el.classList.add("done");
      setTimeout(()=>space.removeChild(el), 500); // 0.5ç§’å¾Œã«æ¶ˆã™
    }
  });

  space.appendChild(el);
  todos.push({el, priority, deadline});

  textInput.value = "";
  deadlineInput.value = "";
});
</script>

</body>
</html>
